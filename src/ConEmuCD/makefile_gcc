######################################################
# to build correct bitness user have to specify DIRBIT
#   make -f makefile_gcc DIRBIT=32
# or
#   make -f makefile_gcc DIRBIT=64
# default is 32 bit make
#
# define USERCPPFLAGS to pass them to compiler, example below
#   mingw32-make -f makefile_gcc USERCPPFLAGS=-fpermissive
######################################################

NAME = ConEmuCD
EXT = dll
RELEASESUBDIR = /ConEmu
DEF = export.gcc.def
USERCPP =
LNKPLATFORM = -mconsole
BASEADDRESS =

include ../makefile_gcc_inc

USERLIBS += -ladvapi32 -lgdi32 -lshell32 -lshlwapi -loleaut32 -lwinmm

SRCS = \
		../common/CEStr.cpp         \
		../common/CmdLine.cpp        \
		../common/Common.cpp         \
		../common/ConEmuCheck.cpp    \
		../common/ConsoleMixAttr.cpp \
		../common/ConsoleRead.cpp    \
		../common/EmergencyShow.cpp  \
		../common/EnvVar.cpp         \
		../common/execute.cpp        \
		../common/HandleKeeper.cpp         \
		../common/HkFunc.cpp         \
		../common/InQueue.cpp        \
		../common/Keyboard.cpp       \
		../common/MAssert.cpp        \
		../common/MConHandle.cpp     \
		../common/Memory.cpp         \
		../common/MFileLog.cpp       \
		../common/MFileLogEx.cpp     \
		../common/MModule.cpp        \
		../common/Monitors.cpp       \
		../common/MPerfCounter.cpp   \
		../common/MProcess.cpp       \
		../common/MProcessBits.cpp   \
		../common/MRect.cpp          \
		../common/MSection.cpp       \
		../common/MSectionSimple.cpp \
		../common/MSecurity.cpp      \
		../common/MStrDup.cpp        \
		../common/MStrSafe.cpp       \
		../common/ProcessSetEnv.cpp  \
		../common/RConStartArgs.cpp  \
		../common/SetEnvVar.cpp      \
		../common/WCodePage.cpp      \
		../common/WConsole.cpp       \
		../common/WConsoleEx.cpp     \
		../common/WConsoleInfo.cpp   \
		../common/wcwidth.cpp        \
		../common/WFiles.cpp         \
		../common/WModuleCheck.cpp   \
		../common/WObjects.cpp       \
		../common/WSession.cpp       \
		../common/WThreads.cpp       \
		../common/WUser.cpp          \
		../ConEmuHk/Injects.cpp      \
		Actions.cpp        \
		ConAnsi.cpp        \
		ConAnsiImpl.cpp    \
		ConData.cpp        \
		ConEmuCmd.cpp      \
		ConEmuSrv.cpp      \
		ConProcess.cpp     \
		ConsoleMain.cpp    \
		Debugger.cpp       \
		DownloaderCall.cpp \
		GuiHooks.cpp       \
		GuiMacro.cpp       \
		Infiltrate.cpp     \
		InjectRemote.cpp   \
		InputLogger.cpp    \
		LogFunction.cpp    \
		MapDump.cpp        \
		Queue.cpp          \
		Shutdown.cpp       \
		SrvCommands.cpp    \
		SrvPipes.cpp       \
		StartEnv.cpp       \
		UnicodeTest.cpp

include ../makefile_gcc_target
